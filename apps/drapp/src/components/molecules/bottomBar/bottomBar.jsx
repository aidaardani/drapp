import { Link, NavLink, useLocation } from 'react-router-dom';
import { Mobile } from '@paziresh24/hooks/core/device';
import { BottomNavigation, BottomNavigationAction } from '@mui/material';
import { memo, useState } from 'react';
import { SettingIcon } from '@paziresh24/shared/icon';
import { useDrApp } from '@paziresh24/context/drapp';
import CONSULT_CENTER_ID from '@paziresh24/constants/consultCenterId';

export const BottomBar = () => {
    const [info] = useDrApp();
    const router = useLocation();
    const settingPage = info.center.id === CONSULT_CENTER_ID ? '/turning/setting/' : '/setting';
    const pathMap = [settingPage, '/', '/services'];
    const [value, setValue] = useState(pathMap.indexOf(router.pathname));

    const handleChange = (event, value) => {
        setValue(value);
    };

    return (
        <Mobile>
            <BottomNavigation
                sx={{
                    height: '4.5rem',
                    minHeight: '4.5rem',
                    borderTop: '1px solid #e8ecf0',
                    zIndex: '20'
                }}
                value={value}
                onChange={handleChange}
            >
                <BottomNavigationAction
                    label="تنظیمات"
                    LinkComponent={Link}
                    to={pathMap[0]}
                    icon={<SettingIcon color="#0070f3" />}
                />
                <BottomNavigationAction
                    label="بیماران"
                    LinkComponent={Link}
                    to={pathMap[1]}
                    icon={
                        <svg
                            width="25"
                            height="25"
                            viewBox="0 0 25 25"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                fillRule="evenodd"
                                clipRule="evenodd"
                                d="M9.37969 2.8313C9.37969 2.41709 9.0439 2.0813 8.62969 2.0813C8.21547 2.0813 7.87969 2.41709 7.87969 2.8313V4.09042C7.16037 4.10884 6.60843 4.16389 6.12018 4.32753C4.70781 4.80091 3.5993 5.90942 3.12593 7.32179C2.87911 8.05817 2.87933 8.93942 2.87966 10.3213L2.87969 10.4784V14.8313L2.87969 14.8877C2.87967 16.7255 2.87966 18.1811 3.03282 19.3203C3.19045 20.4927 3.52257 21.4417 4.27093 22.1901C5.01929 22.9384 5.96824 23.2705 7.14067 23.4282C8.27987 23.5813 9.73549 23.5813 11.5732 23.5813H11.5733H11.6297H13.6297H13.6861H13.6861C15.5239 23.5813 16.9795 23.5813 18.1187 23.4282C19.2911 23.2705 20.2401 22.9384 20.9884 22.1901C21.7368 21.4417 22.0689 20.4927 22.2266 19.3203C22.3797 18.1811 22.3797 16.7255 22.3797 14.8878V14.8877V14.8313V12.8313V12.7749V12.7748C22.3797 10.9371 22.3797 9.48148 22.2266 8.34227C22.0689 7.16985 21.7368 6.2209 20.9884 5.47254C20.2401 4.72418 19.2911 4.39206 18.1187 4.23443C17.8858 4.20311 17.6396 4.1782 17.3797 4.15838V2.8313C17.3797 2.41709 17.0439 2.0813 16.6297 2.0813C16.2155 2.0813 15.8797 2.41709 15.8797 2.8313V4.09402C15.2177 4.08128 14.4883 4.08129 13.6861 4.0813L13.6297 4.0813H9.37969V2.8313ZM15.8797 5.8313V5.59438C15.227 5.58162 14.4837 5.5813 13.6297 5.5813H9.37969V5.8313C9.37969 6.24551 9.0439 6.5813 8.62969 6.5813C8.21547 6.5813 7.87969 6.24551 7.87969 5.8313V5.59206C7.25324 5.60843 6.89697 5.64919 6.59687 5.74977C5.63051 6.07366 4.87206 6.83212 4.54817 7.79847C4.38949 8.2719 4.37969 8.88514 4.37969 10.4784V14.8313C4.37969 16.7381 4.38128 18.0928 4.51945 19.1205C4.65471 20.1265 4.90838 20.7062 5.33159 21.1294C5.7548 21.5526 6.33445 21.8063 7.34054 21.9415C8.3682 22.0797 9.72287 22.0813 11.6297 22.0813H13.6297C15.5365 22.0813 16.8912 22.0797 17.9188 21.9415C18.9249 21.8063 19.5046 21.5526 19.9278 21.1294C20.351 20.7062 20.6047 20.1265 20.7399 19.1205C20.8781 18.0928 20.8797 16.7381 20.8797 14.8313V12.8313C20.8797 10.9245 20.8781 9.56981 20.7399 8.54215C20.6047 7.53606 20.351 6.95641 19.9278 6.5332C19.5046 6.10999 18.9249 5.85632 17.9188 5.72105C17.7485 5.69815 17.5691 5.67899 17.3797 5.66298V5.8313C17.3797 6.24551 17.0439 6.5813 16.6297 6.5813C16.2155 6.5813 15.8797 6.24551 15.8797 5.8313ZM7.6297 9.08131C7.21548 9.08131 6.8797 9.41709 6.8797 9.83131C6.8797 10.2455 7.21548 10.5813 7.6297 10.5813H17.6297C18.0439 10.5813 18.3797 10.2455 18.3797 9.83131C18.3797 9.41709 18.0439 9.08131 17.6297 9.08131H7.6297ZM9.6297 13.8313C9.6297 14.3836 9.18198 14.8313 8.6297 14.8313C8.07741 14.8313 7.6297 14.3836 7.6297 13.8313C7.6297 13.279 8.07741 12.8313 8.6297 12.8313C9.18198 12.8313 9.6297 13.279 9.6297 13.8313ZM8.6297 18.8313C9.18198 18.8313 9.6297 18.3836 9.6297 17.8313C9.6297 17.279 9.18198 16.8313 8.6297 16.8313C8.07741 16.8313 7.6297 17.279 7.6297 17.8313C7.6297 18.3836 8.07741 18.8313 8.6297 18.8313ZM13.6297 17.8313C13.6297 18.3836 13.182 18.8313 12.6297 18.8313C12.0774 18.8313 11.6297 18.3836 11.6297 17.8313C11.6297 17.279 12.0774 16.8313 12.6297 16.8313C13.182 16.8313 13.6297 17.279 13.6297 17.8313ZM16.6297 18.8313C17.182 18.8313 17.6297 18.3836 17.6297 17.8313C17.6297 17.279 17.182 16.8313 16.6297 16.8313C16.0774 16.8313 15.6297 17.279 15.6297 17.8313C15.6297 18.3836 16.0774 18.8313 16.6297 18.8313ZM13.6297 13.8313C13.6297 14.3836 13.182 14.8313 12.6297 14.8313C12.0774 14.8313 11.6297 14.3836 11.6297 13.8313C11.6297 13.279 12.0774 12.8313 12.6297 12.8313C13.182 12.8313 13.6297 13.279 13.6297 13.8313ZM16.6297 14.8313C17.182 14.8313 17.6297 14.3836 17.6297 13.8313C17.6297 13.279 17.182 12.8313 16.6297 12.8313C16.0774 12.8313 15.6297 13.279 15.6297 13.8313C15.6297 14.3836 16.0774 14.8313 16.6297 14.8313Z"
                                fill="#0070f3"
                            />
                        </svg>
                    }
                />
                <BottomNavigationAction
                    label="پروفایل"
                    LinkComponent={Link}
                    to={pathMap[2]}
                    icon={
                        <svg
                            width="25"
                            height="25"
                            viewBox="0 0 25 25"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M12.2505 12.9331C9.08049 12.9331 6.50049 10.3531 6.50049 7.18311C6.50049 4.01311 9.08049 1.43311 12.2505 1.43311C15.4205 1.43311 18.0005 4.01311 18.0005 7.18311C18.0005 10.3531 15.4205 12.9331 12.2505 12.9331ZM12.2505 2.93311C9.91049 2.93311 8.00049 4.84311 8.00049 7.18311C8.00049 9.52311 9.91049 11.4331 12.2505 11.4331C14.5905 11.4331 16.5005 9.52311 16.5005 7.18311C16.5005 4.84311 14.5905 2.93311 12.2505 2.93311Z"
                                fill="#0070f3"
                            />
                            <path
                                d="M20.8406 22.9331C20.4306 22.9331 20.0906 22.5931 20.0906 22.1831C20.0906 18.7331 16.5706 15.9331 12.2506 15.9331C7.93064 15.9331 4.41064 18.7331 4.41064 22.1831C4.41064 22.5931 4.07064 22.9331 3.66064 22.9331C3.25064 22.9331 2.91064 22.5931 2.91064 22.1831C2.91064 17.9131 7.10064 14.4331 12.2506 14.4331C17.4006 14.4331 21.5906 17.9131 21.5906 22.1831C21.5906 22.5931 21.2506 22.9331 20.8406 22.9331Z"
                                fill="#0070f3"
                            />
                        </svg>
                    }
                />
            </BottomNavigation>
        </Mobile>
    );
};

export default memo(BottomBar);
